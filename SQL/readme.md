# SQL Database Initialization Script

## 📌 Описание

Этот SQL-скрипт выполняет полную инициализацию базы данных для Antivirus API. Скрипт создает все необходимые объекты только если они не существуют, что делает его идемпотентным и безопасным для повторного выполнения.

## 🛠 Функционал скрипта

1. **Создает схему `antivirus`** (если не существует)
2. **Создает таблицы**:
   - `users` - Пользователи системы
   - `signatures` - Антивирусные сигнатуры
   - `files` - Загруженные файлы
   - `signatures_history` - История изменений сигнатур
   - `audit_log` - Лог действий в системе
3. **Добавляет индексы** для оптимизации запросов
4. **Создает администратора**:
   - Логин: `admin`
   - Пароль: `admin123` (хешированный)
   - Email: `admin@example.com`
5. **Настраивает автоматическое обновление** полей `updated_at`

## 🚀 Как использовать

### Требования
- PostgreSQL 14+
- Права суперпользователя или права на создание объектов

### Выполнение скрипта

```bash
psql -U your_username -d your_database -f init_db.sql

🔐 Учетные данные администратора

После выполнения скрипта будет создан администратор с доступом к системе:
Copy

Логин:    admin
Пароль:   admin123
Email:    admin@example.com

Важно! После первого входа рекомендуется:

    Изменить пароль администратора

    Обновить email на реальный

🏗 Структура базы данных
Основные таблицы
Таблица	Описание
users	Пользователи системы
signatures	Антивирусные сигнатуры
files	Загруженные файлы
signatures_history	История изменений сигнатур
audit_log	Лог действий в системе
Индексы

    idx_signatures_file_type - Для поиска сигнатур по типу файла
    idx_history_signature_id - Для поиска в истории по ID сигнатуры